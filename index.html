<!DOCTYPE html>
<html lang="fr">
<head>
  <meta name="impact-site-verification" value="4c751480-1285-40bc-b439-ba63a63332e2">
  <meta charset="UTF-8" />
  <title>WhaleTracker ‚Äì Baleines BTC / ETH / BSC / PulseChain</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Google AdSense (gard√© si tu veux plus tard, mais pas utilis√© ici) -->
  <script async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1012970945258326"
    crossorigin="anonymous"></script>

  <style>
    :root{
      --bg:#050816;
      --bg-soft:#0b1020;
      --card:#0f172a;
      --accent:#22c55e;
      --accent-soft:#15803d;
      --text:#e5e7eb;
      --muted:#9ca3af;
      --border:#1f2937;
      --danger:#ef4444;
      --radius-lg:16px;
      --shadow-soft:0 18px 45px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:radial-gradient(circle at top,#1f2937 0,#020617 45%,#000 100%);
      color:var(--text);
      min-height:100vh;
      padding:24px;
      display:flex;
      flex-direction:column;
      align-items:center;
      position:relative;
      overflow-x:hidden;
    }
    .container{width:100%;max-width:1200px;flex:1 0 auto}
    .card{
      background:radial-gradient(circle at top left,rgba(15,23,42,.98),rgba(15,23,42,.92));
      border-radius:24px;
      padding:24px 24px 28px;
      box-shadow:var(--shadow-soft);
      border:1px solid rgba(148,163,184,.18);
      backdrop-filter:blur(18px);
      position:relative;
      overflow:hidden;
    }
    .card::before{
      content:"";
      position:absolute;
      top:-40px;
      right:-80px;
      width:700px;
      height:700px;
      background-image:url("baleine.webp");
      background-repeat:no-repeat;
      background-size:contain;
      background-position:top right;
      opacity:.26;
      pointer-events:none;
      filter:drop-shadow(0 0 28px rgba(56,189,248,.35));
      z-index:0;
    }
    .card>*{position:relative;z-index:1}

    .header{
      display:flex;
      flex-wrap:wrap;
      justify-content:space-between;
      gap:12px;
      margin-bottom:8px;
      align-items:center;
    }
    .title-block h1{
      font-size:1.5rem;
      letter-spacing:.08em;
      text-transform:uppercase;
    }
    .title-block p{
      font-size:.85rem;
      color:var(--muted);
      margin-top:4px;
    }

    .badges{display:flex;flex-wrap:wrap;gap:8px;font-size:.75rem}
    .badge{
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.3);
      color:var(--muted);
      display:inline-flex;
      align-items:center;
      gap:6px;
      background:rgba(15,23,42,.72);
      backdrop-filter:blur(10px);
    }
    .badge span.dot{
      width:7px;height:7px;border-radius:999px;
      background:var(--accent);
      box-shadow:0 0 10px rgba(34,197,94,.7);
    }

    .filters{display:flex;flex-wrap:wrap;gap:8px;margin:10px 0 6px}
    .filter-btn{
      border-radius:999px;
      border:1px solid rgba(148,163,184,.3);
      background:rgba(15,23,42,.9);
      color:var(--muted);
      font-size:.8rem;
      padding:6px 14px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:6px;
      transition:all .15s ease-out;
    }
    .filter-btn.active{
      background:radial-gradient(circle at top left,#22c55e,#15803d 60%,#052e16 100%);
      border-color:rgba(34,197,94,.8);
      color:#ecfdf5;
      box-shadow:0 0 18px rgba(34,197,94,.55);
    }
    .filter-btn span.pill-dot{width:8px;height:8px;border-radius:999px;background:rgba(148,163,184,.8)}
    .filter-btn.active span.pill-dot{background:#fff}

    .stats-global{font-size:.75rem;color:var(--muted);margin-bottom:10px}

    /* Sponsor Bitget */
    .sponsor-hero{
      margin:12px 0 14px;
      padding:16px 18px;
      border-radius:18px;
      border:1px dashed rgba(148,163,184,.35);
      background:radial-gradient(circle at top,rgba(15,23,42,.92),rgba(15,23,42,.85));
      box-shadow:0 10px 26px rgba(0,0,0,.35);
      width:58%;
      max-width:640px;
      margin-right:auto;
      margin-left:0;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      min-height:92px;
    }
    .sponsor-left{display:flex;flex-direction:column;gap:6px}
    .sponsor-pill{
      width:fit-content;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(34,197,94,.7);
      background:rgba(34,197,94,.12);
      color:#bbf7d0;
      font-size:.72rem;
      letter-spacing:.08em;
      text-transform:uppercase;
    }
    .sponsor-title{font-size:1.05rem;font-weight:700}
    .sponsor-sub{font-size:.82rem;color:var(--muted);line-height:1.35}
    .sponsor-cta{
      border-radius:999px;
      border:1px solid rgba(34,197,94,.9);
      background:radial-gradient(circle at top,rgba(34,197,94,.25),rgba(15,23,42,1));
      color:#ecfdf5;
      padding:10px 16px;
      font-size:.82rem;
      cursor:pointer;
      white-space:nowrap;
      transition:transform .12s ease-out, box-shadow .12s ease-out, background .12s ease-out;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .sponsor-cta:hover{
      transform:translateY(-1px);
      box-shadow:0 0 18px rgba(34,197,94,.45);
      background:rgba(15,23,42,1);
    }

    .table-wrapper{
      border-radius:16px;
      border:1px solid rgba(148,163,184,.2);
      background:radial-gradient(circle at top,rgba(15,23,42,.98),rgba(15,23,42,.9));
      overflow-x:auto;
      overflow-y:hidden;
      -webkit-overflow-scrolling:touch;
      display:block;
    }
    table{width:100%;border-collapse:collapse;font-size:.8rem;min-width:620px}
    thead{background:rgba(15,23,42,.98);position:sticky;top:0;z-index:2}
    th,td{
      padding:10px 12px;
      text-align:left;
      border-bottom:1px solid rgba(30,41,59,.9);
      white-space:nowrap;
    }
    th{
      font-weight:600;
      color:rgba(148,163,184,.95);
      font-size:.75rem;
      letter-spacing:.06em;
      text-transform:uppercase;
    }
    tbody tr{
      background:rgba(15,23,42,.85);
      transition:background .15s ease-out, transform .12s ease-out, box-shadow .12s ease-out;
    }
    tbody tr:nth-child(even){background:rgba(15,23,42,.9)}
    tbody tr:hover{
      background:rgba(15,23,42,.98);
      box-shadow:0 0 0 1px rgba(34,197,94,.25);
      transform:translateY(-1px);
    }

    .network-pill{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:3px 9px;
      border-radius:999px;
      font-size:.75rem;
      background:rgba(15,23,42,.9);
      border:1px solid rgba(148,163,184,.35);
    }
    .network-dot{width:8px;height:8px;border-radius:999px}
    .net-btc{background:#f97316}
    .net-eth{background:#6366f1}
    .net-bsc{background:#eab308}
    .net-pls{background:#22c55e}

    .address{
      font-family:"JetBrains Mono",ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
      font-size:.78rem;
      color:#f9fafb;
    }
    .actions{display:flex;gap:6px}
    .btn-sm{
      font-size:.72rem;
      padding:4px 9px;
      border-radius:999px;
      border:1px solid rgba(34,197,94,.85);
      background:radial-gradient(circle at top,rgba(34,197,94,.23),rgba(15,23,42,1));
      color:#bbf7d0;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:4px;
      transition:all .12s ease-out;
      white-space:nowrap;
    }
    .btn-sm.primary{
      border-color:rgba(34,197,94,1);
      background:radial-gradient(circle at top,rgba(34,197,94,.35),rgba(15,23,42,1));
      color:#ecfdf5;
    }
    .btn-sm:hover{
      background:rgba(15,23,42,1);
      transform:translateY(-.5px);
      box-shadow:0 0 12px rgba(34,197,94,.5);
    }
    .btn-sm.primary:hover{box-shadow:0 0 16px rgba(34,197,94,.7)}

    .type-pill{
      font-size:.72rem;
      padding:3px 8px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.35);
      color:rgba(209,213,219,.9);
      background:rgba(15,23,42,.9);
    }
    .empty-state{padding:16px;text-align:center;font-size:.85rem;color:var(--muted)}

    .bot-analysis{
      margin-top:14px;
      padding:12px 14px;
      border-radius:16px;
      border:1px solid rgba(148,163,184,.4);
      background:radial-gradient(circle at top left,rgba(15,23,42,.98),rgba(15,23,42,.9));
      box-shadow:0 12px 30px rgba(15,23,42,.7);
      font-size:.8rem;
    }
    .bot-analysis-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      margin-bottom:8px;
    }
    .bot-chip{
      padding:4px 10px;
      border-radius:999px;
      background:rgba(34,197,94,.16);
      border:1px solid rgba(34,197,94,.7);
      color:#bbf7d0;
      font-size:.75rem;
    }
    .bot-wallet-name{font-weight:600;color:#e5e7eb;font-size:.8rem;text-align:right}
    .bot-analysis-body p{margin:2px 0}
    .bot-analysis-body p span.label{color:var(--muted)}
    .bot-tag{
      display:inline-flex;
      align-items:center;
      padding:2px 8px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.4);
      font-size:.7rem;
      margin-right:4px;
      margin-top:2px;
    }

    .footer-info{
      display:flex;
      justify-content:flex-end;
      padding:8px 12px 4px;
      font-size:.75rem;
      color:var(--muted);
    }

    /* Donation */
    .donation-card{
      position:relative;
      z-index:3;
      margin:18px auto 10px;
      width:440px;
      max-width:100%;
      background:radial-gradient(circle at top left,rgba(15,23,42,.98),rgba(15,23,42,.92));
      border-radius:18px;
      border:1px solid rgba(148,163,184,.35);
      padding:12px 16px 14px;
      box-shadow:0 14px 30px rgba(15,23,42,.75);
    }
    .donation-header{display:flex;align-items:center;gap:8px;margin-bottom:8px;font-size:.86rem}
    .donation-header span.icon{font-size:1.05rem}
    .donation-header strong{letter-spacing:.03em}
    .donation-sub{font-size:.78rem;color:var(--muted);margin-bottom:6px}
    .donation-row{display:flex;align-items:center;margin-top:4px;gap:6px;font-size:.78rem}
    .donation-label{width:42px;font-weight:600;color:#e5e7eb}
    .donation-address{
      flex:1;
      font-family:"JetBrains Mono",ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
      font-size:.75rem;
      color:#d1d5db;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .donation-footer{display:flex;justify-content:flex-end;margin-top:8px}

    /* Partenaires */
    .partners-section{
      margin:18px 0 4px;
      padding:14px 16px;
      border-radius:18px;
      border:1px solid rgba(148,163,184,.35);
      background:radial-gradient(circle at top left,rgba(15,23,42,.97),rgba(15,23,42,.9));
      box-shadow:0 10px 26px rgba(15,23,42,.7);
      font-size:.8rem;
    }
    .partners-section h3{font-size:.9rem;margin-bottom:6px}
    .partners-section p{color:var(--muted);margin-bottom:10px;font-size:.78rem}
    .partners-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
      gap:10px;
    }
    .partner-card{
      padding:8px 10px;
      border-radius:14px;
      border:1px solid rgba(148,163,184,.35);
      background:rgba(15,23,42,.96);
    }
    .partner-card strong{display:block;margin-bottom:2px}
    .partner-card a{color:#22c55e;text-decoration:none;font-size:.78rem}
    .partner-card a:hover{text-decoration:underline}

    /* Footer global */
    .site-footer{
      width:100%;
      max-width:1200px;
      flex-shrink:0;
      margin-top:16px;
      padding-top:12px;
      border-top:1px solid rgba(148,163,184,.25);
      font-size:.78rem;
      color:var(--muted);
      display:flex;
      flex-wrap:wrap;
      justify-content:space-between;
      gap:8px;
    }
    .site-footer-links{display:flex;flex-wrap:wrap;gap:10px}
    .site-footer a{color:#22c55e;text-decoration:none}
    .site-footer a:hover{text-decoration:underline}

    .footer-affiliate{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.28);
      background:rgba(15,23,42,.55);
      color:rgba(209,213,219,.92);
      text-decoration:none;
      transition:transform .12s ease-out, box-shadow .12s ease-out, border-color .12s ease-out;
      white-space:nowrap;
    }
    .footer-affiliate:hover{
      transform:translateY(-1px);
      box-shadow:0 0 14px rgba(34,197,94,.35);
      border-color:rgba(34,197,94,.55);
    }

    @media (max-width:800px){
      body{padding:12px}
      .card{padding:16px}
      .header{align-items:flex-start}
      .donation-card{width:100%}
      th:nth-child(4),td:nth-child(4){display:none}
      .sponsor-hero{width:100%;max-width:100%;margin-left:0}
      .site-footer{font-size:.75rem;flex-direction:column;align-items:flex-start}
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="card">

      <div class="header">
        <div class="title-block">
          <h1>WhaleTracker</h1>
          <p>Suivi de quelques grosses baleines publiques sur Bitcoin, Ethereum, BSC et PulseChain.</p>
        </div>
        <div class="badges">
          <div class="badge">
            <span class="dot"></span>
            <span>Pas d‚ÄôAPI ‚Üí aucun risque d‚Äôerreur API (NOTOK)</span>
          </div>
          <div class="badge">
            <span>üëÄ</span><span>Cliquez sur ‚ÄúExplorer‚Äù pour voir les d√©tails en temps r√©el</span>
          </div>
        </div>
      </div>

      <div class="filters">
        <button class="filter-btn active" data-network="all"><span class="pill-dot"></span> Tout</button>
        <button class="filter-btn" data-network="bitcoin"><span class="pill-dot"></span> ‚Çø Bitcoin</button>
        <button class="filter-btn" data-network="ethereum"><span class="pill-dot"></span> Œû Ethereum</button>
        <button class="filter-btn" data-network="bsc"><span class="pill-dot"></span> BSC</button>
        <button class="filter-btn" data-network="pulsechain"><span class="pill-dot"></span> PulseChain</button>
        <button class="filter-btn" id="btn-autopilot" title="D√©couvrir AutoPilot PulseChain">
          <span class="pill-dot"></span> AutoPilot PulseChain
        </button>
      </div>

      <div id="stats-global" class="stats-global"></div>

      <!-- ‚úÖ Bitget -->
      <div class="sponsor-hero">
        <div class="sponsor-left">
          <div class="sponsor-pill">Partenaire</div>
          <div class="sponsor-title">üìà Bitget ‚Äì Exchange crypto</div>
          <div class="sponsor-sub">
            Frais r√©duits pour trader BTC / ETH / altcoins<br>
            Bonus & avantages nouveaux utilisateurs
          </div>
        </div>
        <a class="sponsor-cta"
           href="https://bonus.bitget.site/S2ACRK"
           target="_blank"
           rel="noopener nofollow sponsored">
          S‚Äôinscrire ‚Üí
        </a>
      </div>

      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Baleine / Adresse nomm√©e</th>
              <th>R√©seau</th>
              <th>Adresse</th>
              <th>Cat√©gorie</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="whales-body"></tbody>
        </table>

        <div id="empty-state" class="empty-state" style="display:none;">
          Aucune baleine trouv√©e pour ce filtre.
        </div>
      </div>

      <div id="bot-analysis" class="bot-analysis" style="display:none;">
        <div class="bot-analysis-header">
          <span class="bot-chip">ü§ñ WhaleBot</span>
          <span id="bot-wallet-name" class="bot-wallet-name"></span>
        </div>
        <div id="bot-analysis-body" class="bot-analysis-body"></div>
      </div>

      <!-- DONATION CARD -->
      <div class="donation-card">
        <div class="donation-header">
          <span class="icon">üôè</span>
          <strong>Vous aimez WhaleTracker ?</strong>
        </div>
        <div class="donation-sub">Vous pouvez soutenir le projet avec un petit don :</div>

        <div class="donation-row">
          <span class="donation-label">ETH</span>
          <span class="donation-address" id="addr-eth">0x7a23b75434942ddd7d9fe19aa0ed2fea08ed57a1</span>
          <button class="btn-sm" data-copy="#addr-eth">Copier</button>
        </div>
        <div class="donation-row">
          <span class="donation-label">BNB</span>
          <span class="donation-address" id="addr-bnb">0x7a23b75434942ddd7d9fe19aa0ed2fea08ed57a1</span>
          <button class="btn-sm" data-copy="#addr-bnb">Copier</button>
        </div>
        <div class="donation-row">
          <span class="donation-label">PLS</span>
          <span class="donation-address" id="addr-pls">0x7a23b75434942ddd7d9fe19aa0ed2fea08ed57a1</span>
          <button class="btn-sm" data-copy="#addr-pls">Copier</button>
        </div>

        <div class="donation-footer">
          <button class="btn-sm primary" id="copy-all">Copier tout</button>
        </div>
      </div>

      <!-- Partenaires & liens d'affiliation -->
      <div class="partners-section">
        <h3>Outils & partenaires recommand√©s üß∞</h3>
        <p>Certains liens ci-dessous peuvent √™tre des liens d‚Äôaffiliation : ils ne changent rien pour vous, mais soutiennent WhaleTracker.</p>

        <div class="partners-grid">
          <div class="partner-card">
            <strong>üîê Ledger Wallet</strong>
            <span>Prot√©gez vos cl√©s priv√©es hors-ligne.</span><br>
            <a href="https://shop.ledger.com/?r=efleb2c79d59&tracker=WT_partners"
               target="_blank"
               rel="noopener nofollow sponsored">
              Obtenir un Ledger ‚Üí
            </a>
          </div>

          <div class="partner-card">
            <strong>üìà Bitget ‚Äì Exchange crypto</strong>
            <span>Frais r√©duits + bonus nouveaux utilisateurs.</span><br>
            <a href="https://bonus.bitget.site/S2ACRK"
               target="_blank"
               rel="noopener nofollow sponsored">
              S‚Äôinscrire sur Bitget ‚Üí
            </a>
          </div>

          <!-- ‚úÖ NordVPN (lien affili√© valid√©) -->
          <div class="partner-card">
            <strong>üõ°Ô∏è NordVPN (recommand√©)</strong>
            <span>S√©curisez vos connexions √† vos wallets & CEX.</span><br>
            <a href="https://go.nordvpn.net/aff_c?offer_id=158&aff_id=137997&url_id=902"
               target="_blank"
               rel="noopener nofollow sponsored">
              Activer NordVPN ‚Üí
            </a>
          </div>
        </div>
      </div>

      <div class="footer-info">
        Derni√®re mise √† jour : <span id="last-refresh" style="margin-left:4px;">--:--:--</span>
      </div>

    </div>
  </div>

  <footer class="site-footer">
    <div>¬© 2025 WhaleTracker ‚Ä¢ Tous droits r√©serv√©s.</div>

    <a class="footer-affiliate"
       href="https://shop.ledger.com/?r=efleb2c79d59&tracker=WT_footer"
       target="_blank"
       rel="noopener nofollow sponsored">
      üîê S√©curit√© recommand√©e : Ledger
    </a>

    <div class="site-footer-links">
      <a href="legal.html">Mentions l√©gales</a>
      <a href="privacy.html">Politique de confidentialit√©</a>
      <a href="terms.html">Conditions d‚Äôutilisation</a>
      <a href="contact.html">Contact</a>
    </div>
  </footer>

  <script>
    const ETHERSCAN_API_KEY = "5QD6AF5A7FDHG373RPVNTJJKZK59RF86HD";

    const whales = [
      { name: "Binance Cold Wallet #1", network: "bitcoin", address: "34xp4vRoCGJym3xR7yCVPFHoCNxv4Twseo", type: "Exchange" },
      { name: "Binance Cold Wallet #2", network: "bitcoin", address: "3M219KR5vEneNb47ewrPfWyb5jQ2DjxRP6", type: "Exchange" },
      { name: "Robinhood Cold Wallet", network: "bitcoin", address: "bc1ql49ydapnjafl5t2cp9zqpjwe6pdgmx98859v2", type: "Exchange / Custody" },
      { name: "Mt. Gox Hack", network: "bitcoin", address: "1FeexV6bAHb8ybZjqQMJrcCrHgW9sb6uF", type: "Hack / Historic" },
      { name: "Silk Road (FBI Confiscated)", network: "bitcoin", address: "bc1qa5wkgaew2dkv56kfvj49j0av5nml45x9ek9hz6", type: "Gov / Confiscated" },
      { name: "Binance BTCB Reserve", network: "bitcoin", address: "3LYJfcfHPXYJreMsASk2jkn69LWEYKzexb", type: "Bridge Reserve" },
      { name: "Mr. 100", network: "bitcoin", address: "1Ay8vMC7R1UbyCCZRVULMV7iQpHSAbguJP", type: "Unknown whale" },

      { name: "Binance: Hot Wallet 20", network: "ethereum", address: "0xf977814e90dA44bFA03b6295A0616a897441aceC", type: "Exchange" },
      { name: "Kraken 4", network: "ethereum", address: "0x267be1C1D684F78cb4F6a176C4911b741E4FfDc0", type: "Exchange" },
      { name: "Beacon Deposit Contract", network: "ethereum", address: "0x00000000219ab540356cBB839Cbe05303d7705Fa", type: "Staking / Protocol" },
      { name: "WETH9 Contract", network: "ethereum", address: "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2", type: "DeFi / WETH" },
      { name: "Bitfinex: Cold Wallet", network: "ethereum", address: "0x742d35Cc6634C0532925a3b844Bc454e4438f44e", type: "Exchange" },
      { name: "Vitalik Buterin (vitalik.eth)", network: "ethereum", address: "0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045", type: "Founder / Individual" },

      { name: "Binance: SAFU Wallet", network: "bsc", address: "0x4b16c5de96eb2117bbe5fd171e4d203624b014aa", type: "SAFU / Reserve" },
      { name: "Venus: vBNB (big protocol)", network: "bsc", address: "0xcf6bb5389c92bdda8a3747ddb454cb7a64626c63", type: "DeFi Protocol" },
      { name: "BNB Bridge Exploiter", network: "bsc", address: "0x489a8756c18c0b8b24ec2a2b9ff3d4d447f79bec", type: "Exploit wallet" },
      { name: "WBNB (Core)", network: "bsc", address: "0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c", type: "WBNB / Core token" },

      { name: "PulseChain PLS (core)", network: "pulsechain", address: "0xA1077a294dDE1B09bB078844df40758a5D0f9a27", type: "Core / System" },
      { name: "PulseX (PLSX)", network: "pulsechain", address: "0x95B303987A60C71504D99Aa1b13B4DA07b0790ab", type: "DEX / Protocol" },
      { name: "INC Token", network: "pulsechain", address: "0x2fa878Ab3F87CC1C9737Fc071108F904c0B0C95d", type: "Reward / Protocol" },
      { name: "HEX (sur Pulse)", network: "pulsechain", address: "0x2b591e99afE9f32eAA6214f7B7629768c40Eeb39", type: "Token RH" }
    ];

    function getExplorerUrl(network, address){
      switch(network){
        case "bitcoin": return "https://www.blockchain.com/btc/address/" + address;
        case "ethereum": return "https://etherscan.io/address/" + address;
        case "bsc": return "https://bscscan.com/address/" + address;
        case "pulsechain": return "https://scan.pulsechain.com/address/" + address;
        default: return "#";
      }
    }
    function networkLabel(network){
      switch(network){
        case "bitcoin": return "Bitcoin";
        case "ethereum": return "Ethereum";
        case "bsc": return "BSC";
        case "pulsechain": return "PulseChain";
        default: return network;
      }
    }
    function networkDotClass(network){
      switch(network){
        case "bitcoin": return "network-dot net-btc";
        case "ethereum": return "network-dot net-eth";
        case "bsc": return "network-dot net-bsc";
        case "pulsechain": return "network-dot net-pls";
        default: return "network-dot";
      }
    }

    function copyToClipboard(text){
      if(navigator.clipboard && window.isSecureContext){
        navigator.clipboard.writeText(text).catch(()=>{});
      } else {
        const textarea = document.createElement("textarea");
        textarea.value = text;
        textarea.style.position = "fixed";
        textarea.style.opacity = "0";
        document.body.appendChild(textarea);
        textarea.focus();
        textarea.select();
        try{ document.execCommand("copy"); }catch(e){}
        document.body.removeChild(textarea);
      }
    }

    function formatTime(date){
      const pad = n => String(n).padStart(2,"0");
      return pad(date.getHours()) + ":" + pad(date.getMinutes()) + ":" + pad(date.getSeconds());
    }
    function updateLastRefresh(){
      const el = document.getElementById("last-refresh");
      if(el) el.textContent = formatTime(new Date());
    }

    async function computeEthereumPersonality(wallet){
      if(!ETHERSCAN_API_KEY) return "Cl√© API Etherscan manquante ‚Üí impossible d‚Äôanalyser.";

      const params = new URLSearchParams({
        module:"account",
        action:"txlist",
        address:wallet.address,
        sort:"desc",
        page:"1",
        offset:"50",
        apikey:ETHERSCAN_API_KEY
      });
      const url = "https://api.etherscan.io/api?" + params.toString();

      const res = await fetch(url);
      if(!res.ok) return "Erreur lors de l‚Äôappel √† Etherscan.";
      const data = await res.json();

      if(data.status !== "1" || !Array.isArray(data.result) || data.result.length === 0){
        return "Pas assez de transactions pour analyser (adresse trop r√©cente ou inactive).";
      }

      const txs = data.result;
      const nowSec = Math.floor(Date.now()/1000);
      const txCount = txs.length;
      const addrLower = wallet.address.toLowerCase();

      let outgoing=0, incoming=0, contractCalls=0;
      let sumValueEth=0;
      let minTime = Number.MAX_SAFE_INTEGER;
      let maxTime = 0;

      for(const tx of txs){
        const from = (tx.from || "").toLowerCase();
        const ts = parseInt(tx.timeStamp || "0", 10);

        const valueWei = Number(tx.value || "0");
        const valueEth = valueWei / 1e18;

        if(from === addrLower) outgoing++; else incoming++;
        if(tx.input && tx.input !== "0x") contractCalls++;

        sumValueEth += valueEth;
        if(ts > 0){ minTime = Math.min(minTime, ts); maxTime = Math.max(maxTime, ts); }
      }

      const avgValueEth = sumValueEth / txCount;
      const oldestDays = (nowSec - minTime) / 86400;
      const newestDays = (nowSec - maxTime) / 86400;
      const contractRatio = contractCalls / txCount;

      if(txCount < 3 && oldestDays > 180) return "Holder discret / long terme (tr√®s peu de mouvements).";
      if(contractRatio > 0.6 && txCount >= 15) return newestDays < 7
        ? "Trader / DeFi tr√®s actif r√©cemment (beaucoup d‚Äôinteractions contrats)."
        : "Trader / DeFi actif (profil orient√© trading/yield).";
      if(incoming > outgoing * 2 && txCount >= 10) return "Whale accumulatrice (plus d‚Äôentr√©es que de sorties).";
      if(outgoing > incoming * 2 && txCount >= 10) return "Adresse en distribution / prise de profits (plus de sorties).";
      if(txCount > 25 && oldestDays < 30) return "Adresse hyper active sur le dernier mois (profil opportuniste).";
      if(avgValueEth > 100 && txCount >= 5) return "Gros portefeuille (transactions moyennes √©lev√©es).";
      return "Profil mixte (trading + holding, comportement diversifi√©).";
    }

    async function analyzeWalletWithBot(w){
      const panel = document.getElementById("bot-analysis");
      const nameEl = document.getElementById("bot-wallet-name");
      const bodyEl = document.getElementById("bot-analysis-body");
      if(!panel || !nameEl || !bodyEl) return;

      nameEl.textContent = w.name + " ‚Äì " + networkLabel(w.network);

      let style="", horizon="", assets="", notes="";
      let tags=[];

      if(w.type && w.type.toLowerCase().includes("exchange")){
        style="Portefeuille d‚Äôexchange centralis√©e / custodial.";
        horizon="Court terme / logistique (d√©p√¥ts/retraits clients).";
        notes="Ne refl√®te pas un investisseur individuel mais la gestion de liquidit√©.";
        tags.push("Exchange","Custodial");
      } else if(w.type && w.type.toLowerCase().includes("staking")){
        style="Contrat de staking / protocole.";
        horizon="Long terme (s√©curisation du r√©seau).";
        notes="Adresse utilis√©e pour s√©curiser le r√©seau et percevoir des rewards.";
        tags.push("Staking","Long terme");
      } else if(w.type && (w.type.toLowerCase().includes("exploit") || w.type.toLowerCase().includes("hack"))){
        style="Adresse li√©e √† un hack / exploit.";
        horizon="Fonds surveill√©s, souvent immobiles.";
        notes="Risque de blacklist / sanctions.";
        tags.push("Hack","Risque √©lev√©");
      } else if(w.type && w.type.toLowerCase().includes("token rh")){
        style="Adresse li√©e √† l‚Äô√©cosyst√®me Richard Heart.";
        horizon="Long terme / sp√©culatif sur HEX / PulseChain.";
        notes="Permet de suivre l‚Äôactivit√© de l‚Äô√©cosyst√®me RH.";
        tags.push("RH","PulseChain");
      } else if(w.type && w.type.toLowerCase().includes("core")){
        style="Adresse c≈ìur de protocole / syst√®me.";
        horizon="Tr√®s long terme, structurel.";
        notes="Adresse critique pour le fonctionnement du r√©seau.";
        tags.push("Core","System");
      } else if(w.type && w.type.toLowerCase().includes("dex")){
        style="Contrat DEX (√©change d√©centralis√©).";
        horizon="Flux continu de swaps / LP / farming.";
        notes="Adresse utilis√©e pour ex√©cuter les √©changes sur le DEX.";
        tags.push("DEX","DeFi");
      } else {
        style="Baleine / grosse adresse identifi√©e.";
        horizon="Profil exact inconnu.";
        notes="Surveiller surtout les gros transferts et les entr√©es/sorties de CEX.";
        tags.push("Whale");
      }

      switch(w.network){
        case "bitcoin": assets="BTC uniquement."; break;
        case "ethereum": assets="ETH + tokens ERC-20 (DeFi, stablecoins‚Ä¶)."; break;
        case "bsc": assets="BNB + tokens BEP-20."; break;
        case "pulsechain": assets="PLS, PLSX, INC, HEX et tokens PulseChain."; break;
        default: assets="Actifs principaux du r√©seau.";
      }

      const tagsHtml = tags.length
        ? "<p>" + tags.map(t => `<span class="bot-tag">${t}</span>`).join(" ") + "</p>"
        : "";

      bodyEl.innerHTML =
        `${tagsHtml}
        <p><span class="label">Style probable :</span> ${style}</p>
        <p><span class="label">Horizon :</span> ${horizon}</p>
        <p><span class="label">Actifs principaux :</span> ${assets}</p>
        <p><span class="label">Personnalit√© probable :</span> <span id="bot-personality-line">Analyse en cours‚Ä¶</span></p>
        <p><span class="label">Notes :</span> ${notes}</p>
        <p style="margin-top:6px; font-size:0.72rem; color:rgba(148,163,184,0.9);">
          ‚ö†Ô∏è Analyse exp√©rimentale bas√©e sur des heuristiques.
        </p>`;

      panel.style.display = "block";
      panel.scrollIntoView({ behavior:"smooth", block:"center" });

      const personalityEl = document.getElementById("bot-personality-line");
      if(!personalityEl) return;

      if(w.network !== "ethereum"){
        personalityEl.textContent = "Analyse d√©taill√©e dispo uniquement pour Ethereum pour l‚Äôinstant.";
        return;
      }

      try{
        personalityEl.textContent = "Connexion √† Etherscan‚Ä¶";
        const personality = await computeEthereumPersonality(w);
        personalityEl.textContent = personality;
      } catch {
        personalityEl.textContent = "Erreur pendant l‚Äôanalyse on-chain.";
      }
    }

    const tbody = document.getElementById("whales-body");
    const emptyState = document.getElementById("empty-state");
    const filterButtons = document.querySelectorAll(".filter-btn");
    const statsGlobalEl = document.getElementById("stats-global");
    let currentFilter = "all";

    function updateGlobalStats(){
      const counts = whales.reduce((acc, w) => {
        acc[w.network] = (acc[w.network] || 0) + 1;
        acc.all = (acc.all || 0) + 1;
        return acc;
      }, {});
      statsGlobalEl.textContent =
        `Total : ${counts.all} baleines ‚Ä¢ BTC : ${counts.bitcoin || 0} ‚Ä¢ ETH : ${counts.ethereum || 0} ‚Ä¢ BSC : ${counts.bsc || 0} ‚Ä¢ PLS : ${counts.pulsechain || 0}`;
    }

    function renderTable(activeNetwork="all"){
      tbody.innerHTML = "";
      const filtered = whales.filter(w => activeNetwork === "all" ? true : w.network === activeNetwork);
      emptyState.style.display = filtered.length === 0 ? "block" : "none";

      for(const w of filtered){
        const tr = document.createElement("tr");

        const tdName = document.createElement("td");
        tdName.textContent = w.name;
        tr.appendChild(tdName);

        const tdNet = document.createElement("td");
        tdNet.innerHTML =
          `<span class="network-pill">
            <span class="${networkDotClass(w.network)}"></span>
            <span>${networkLabel(w.network)}</span>
          </span>`;
        tr.appendChild(tdNet);

        const tdAddr = document.createElement("td");
        tdAddr.innerHTML = `<span class="address">${w.address}</span>`;
        tr.appendChild(tdAddr);

        const tdType = document.createElement("td");
        tdType.innerHTML = `<span class="type-pill">${w.type || "N/A"}</span>`;
        tr.appendChild(tdType);

        const tdActions = document.createElement("td");
        const actionsDiv = document.createElement("div");
        actionsDiv.className = "actions";

        const btnExplorer = document.createElement("button");
        btnExplorer.className = "btn-sm primary";
        btnExplorer.textContent = "Explorer";
        btnExplorer.addEventListener("click", () => {
          const url = getExplorerUrl(w.network, w.address);
          if(url !== "#") window.open(url, "_blank");
        });

        const btnCopy = document.createElement("button");
        btnCopy.className = "btn-sm";
        btnCopy.textContent = "Copier";
        btnCopy.addEventListener("click", () => {
          copyToClipboard(w.address);
          btnCopy.textContent = "Copi√© ‚úì";
          setTimeout(() => (btnCopy.textContent = "Copier"), 800);
        });

        const btnAnalyze = document.createElement("button");
        btnAnalyze.className = "btn-sm";
        btnAnalyze.textContent = "Analyser";
        btnAnalyze.addEventListener("click", () => analyzeWalletWithBot(w));

        actionsDiv.appendChild(btnExplorer);
        actionsDiv.appendChild(btnCopy);
        actionsDiv.appendChild(btnAnalyze);

        tdActions.appendChild(actionsDiv);
        tr.appendChild(tdActions);
        tbody.appendChild(tr);
      }

      updateLastRefresh();
    }

    // Filtres
    filterButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        const isAutopilot = btn.id === "btn-autopilot";
        if(isAutopilot){
          window.open("https://whaletrackerio.github.io/autopilot-pulsechain/", "_blank");
          return;
        }
        const net = btn.getAttribute("data-network");
        if(!net) return;
        currentFilter = net;
        filterButtons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        renderTable(currentFilter);
      });
    });

    // Copie donation
    document.querySelectorAll(".donation-card [data-copy]").forEach(btn => {
      btn.addEventListener("click", () => {
        const selector = btn.getAttribute("data-copy");
        const target = document.querySelector(selector);
        if(!target) return;
        copyToClipboard(target.textContent.trim());
        const old = btn.textContent;
        btn.textContent = "Copi√© ‚úì";
        setTimeout(() => (btn.textContent = old), 900);
      });
    });

    document.getElementById("copy-all")?.addEventListener("click", () => {
      const eth = document.getElementById("addr-eth")?.textContent.trim() || "";
      const bnb = document.getElementById("addr-bnb")?.textContent.trim() || "";
      const pls = document.getElementById("addr-pls")?.textContent.trim() || "";
      const full = `ETH : ${eth}\nBNB : ${bnb}\nPLS : ${pls}`;
      copyToClipboard(full);

      const btn = document.getElementById("copy-all");
      const old = btn.textContent;
      btn.textContent = "Tout copi√© ‚úì";
      setTimeout(() => (btn.textContent = old), 1000);
    });

    updateGlobalStats();
    renderTable(currentFilter);
    setInterval(updateLastRefresh, 30000);
  </script>
</body>
</html>
